<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="855px" preserveAspectRatio="none" style="width:623px;height:855px;" version="1.1" viewBox="0 0 623 855" width="623px" zoomAndPan="magnify"><defs><filter height="300%" id="f9x444slhxpl2" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[4abae3d9ce14c4c159453d7c82de858e]
cluster FaissModule--><path d="M77,24 L174,24 A6,6 0 0 1 178,28 L185,53.9688 L607,53.9688 A4,4 0 0 1 611,57.9688 L611,839 A4,4 0 0 1 607,843 L77,843 A4,4 0 0 1 73,839 L73,28 A4,4 0 0 1 77,24 " fill="#EEEEEE" filter="url(#f9x444slhxpl2)" style="stroke: #033C73; stroke-width: 1.5;"/><line style="stroke: #033C73; stroke-width: 1.5;" x1="73" x2="185" y1="53.9688" y2="53.9688"/><text fill="#033C73" font-family="Verdana" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="89" x="82" y="42.1387">FaissModule</text><!--MD5=[6b4b3b1bbdd8387328ca5689c9e21d3b]
cluster FaissModule_cfg--><rect fill="#EEEEEE" height="463" rx="4" ry="4" style="stroke: #444444; stroke-width: 2.0; stroke-dasharray: 7.0,7.0;" width="204" x="383" y="80"/><text fill="#444444" font-family="Verdana" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="98" x="436" y="98.1387">Docker Config</text><!--MD5=[475d745c38d6d4a8cd520ef0ab5e7cb0]
cluster EntryPoint--><rect fill="#FFFFFF" filter="url(#f9x444slhxpl2)" height="216" rx="4" ry="4" style="stroke: #2683B9; stroke-width: 1.5;" width="246" x="105" y="82"/><path d="M203,83 L203,98.9688 L193,108.9688 L105,108.9688 " fill="none" style="stroke: #2683B9; stroke-width: 1.5;"/><text fill="#2683B9" font-family="Verdana" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="78" x="113" y="99.1387">Entry point</text><!--MD5=[2241ecf61a6d255cec2496da3ddde373]
cluster MgntIndex--><rect fill="#FFFFFF" filter="url(#f9x444slhxpl2)" height="208" rx="4" ry="4" style="stroke: #2683B9; stroke-width: 1.5;" width="232" x="104" y="363"/><path d="M223,364 L223,379.9688 L213,389.9688 L104,389.9688 " fill="none" style="stroke: #2683B9; stroke-width: 1.5;"/><text fill="#2683B9" font-family="Verdana" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="99" x="112" y="380.1387">Manage Index</text><!--MD5=[b04bb5550214f78caaca30902c6af4f0]
cluster FaissIndex--><path d="M98,614 C98,604 223.5,604 223.5,604 C223.5,604 349,604 349,614 L349,809 C349,819 223.5,819 223.5,819 C223.5,819 98,819 98,809 L98,614 " fill="#FFFFFF" filter="url(#f9x444slhxpl2)" style="stroke: #2683B9; stroke-width: 1.5;"/><path d="M98,614 C98,624 223.5,624 223.5,624 C223.5,624 349,624 349,614 " fill="none" style="stroke: #2683B9; stroke-width: 1.5;"/><text fill="#2683B9" font-family="Verdana" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="79" x="184" y="642.1387">Faiss Index</text><!--MD5=[274cdae4132820e6323b44a261851cbe]
cluster FaissRWLock--><rect fill="#FFFFFF" filter="url(#f9x444slhxpl2)" height="126" rx="4" ry="4" style="stroke: #2683B9; stroke-width: 1.5;" width="203" x="122" y="669"/><path d="M202,670 L202,685.9688 L192,695.9688 L122,695.9688 " fill="none" style="stroke: #2683B9; stroke-width: 1.5;"/><text fill="#2683B9" font-family="Verdana" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="60" x="130" y="686.1387">RWLock¹</text><!--MD5=[6ba3af77585f0f96afa8ecbab1226636]
entity FaissModule_vars--><path d="M414.5,126 L414.5,279.9922 A4,4 0 0 0 418.5,283.9922 L551.5,283.9922 A4,4 0 0 0 555.5,279.9922 L555.5,132 L545.5,122 L418.5,122 A4,4 0 0 0 414.5,126 " fill="#FFFFFF" filter="url(#f9x444slhxpl2)" style="stroke: #868E96; stroke-width: 1.5;"/><path d="M545.5,122 L545.5,128 A4,4 0 0 0 549.5,132 L555.5,132 " fill="#FFFFFF" style="stroke: #868E96; stroke-width: 1.5;"/><text fill="#868E96" font-family="Verdana" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="77" x="435.5" y="174.4355">Mandatory</text><text fill="#868E96" font-family="Verdana" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="0" x="438.5" y="196.5479"/><text fill="#868E96" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="55" x="435.5" y="219.1167">Optional</text><text fill="#868E96" font-family="Verdana" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="84" x="435.5" y="240.9932">NB_MATCHING=</text><text fill="#868E96" font-family="Verdana" font-size="10" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="12" x="522.5" y="240.9932">10</text><text fill="#868E96" font-family="Verdana" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="68" x="435.5" y="262.6338">LOG_LEVEL=</text><text fill="#868E96" font-family="Verdana" font-size="10" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="25" x="506.5" y="262.6338">INFO</text><line style="stroke: #868E96; stroke-width: 1.0;" x1="415.5" x2="443.5" y1="145.1484" y2="145.1484"/><text fill="#868E96" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="73" x="448.5" y="149.4951">Variables</text><line style="stroke: #868E96; stroke-width: 1.0;" x1="526.5" x2="554.5" y1="145.1484" y2="145.1484"/><!--MD5=[ebd114480cba0ff1de10da84bec6bb98]
entity FaissModule_vols--><path d="M399,437 L399,522.5781 A4,4 0 0 0 403,526.5781 L567,526.5781 A4,4 0 0 0 571,522.5781 L571,443 L561,433 L403,433 A4,4 0 0 0 399,437 " fill="#FFFFFF" filter="url(#f9x444slhxpl2)" style="stroke: #868E96; stroke-width: 1.5;"/><path d="M561,433 L561,439 A4,4 0 0 0 565,443 L571,443 " fill="#FFFFFF" style="stroke: #868E96; stroke-width: 1.5;"/><text fill="#868E96" font-family="Verdana" font-size="10" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="23" x="420" y="483.5791">logs</text><text fill="#868E96" font-family="Verdana" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="104" x="446" y="483.5791">-&gt; /var/log/supervisor</text><text fill="#868E96" font-family="Verdana" font-size="10" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="420" y="505.2197">data_dir</text><text fill="#868E96" font-family="Verdana" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="59" x="469" y="505.2197">-&gt; /opt/faiss</text><line style="stroke: #868E96; stroke-width: 1.0;" x1="400" x2="446" y1="456.1484" y2="456.1484"/><text fill="#868E96" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="68" x="451" y="460.4951">Volumes</text><line style="stroke: #868E96; stroke-width: 1.0;" x1="524" x2="570" y1="456.1484" y2="456.1484"/><!--MD5=[689e0eb4ceaea5e576289e84e3d749c9]
entity FAISS_MSG_C--><rect fill="#FFFFFF" filter="url(#f9x444slhxpl2)" height="141.875" rx="4" ry="4" style="stroke: #2683B9; stroke-width: 1.5;" width="190" x="137" y="132"/><rect fill="#FFFFFF" height="10" style="stroke: #2683B9; stroke-width: 1.5;" width="15" x="307" y="137"/><rect fill="#FFFFFF" height="2" style="stroke: #2683B9; stroke-width: 1.5;" width="4" x="305" y="139"/><rect fill="#FFFFFF" height="2" style="stroke: #2683B9; stroke-width: 1.5;" width="4" x="305" y="143"/><a href="http://10.165.64.205/AI/Messaging" target="_top" title="http://10.165.64.205/AI/Messaging" xlink:actuate="onRequest" xlink:href="http://10.165.64.205/AI/Messaging" xlink:show="new" xlink:title="http://10.165.64.205/AI/Messaging" xlink:type="simple"><text fill="#0000FF" font-family="Verdana" font-size="12" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="67" x="157" y="168.1387">Messaging</text></a><text fill="#2683B9" font-family="Verdana" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="14" x="228" y="168.1387">lib</text><line style="stroke: #2683B9; stroke-width: 1.0;" x1="138" x2="326" y1="175.9688" y2="175.9688"/><text fill="#008080" font-family="Verdana" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="114" x="163" y="196.1074">ListenNumpyMsg()</text><text fill="#008080" font-family="Verdana" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="16" x="163" y="220.0762">on</text><text fill="#008080" font-family="Verdana" font-size="12" font-style="italic" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="108" x="183" y="220.0762">127.0.0.1:14000</text><line style="stroke: #2683B9; stroke-width: 1.0;" x1="138" x2="326" y1="231.9063" y2="231.9063"/><text fill="#2683B9" font-family="Verdana" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="71" x="163" y="252.0449">ThreadPool</text><!--MD5=[39279e4bc89810b5e3f47f5b3c9a63d1]
entity FaissIdxMgnt--><rect fill="#FFFFFF" filter="url(#f9x444slhxpl2)" height="149.875" rx="4" ry="4" style="stroke: #2683B9; stroke-width: 1.5;" width="107" x="119.5" y="405"/><rect fill="#FFFFFF" height="10" style="stroke: #2683B9; stroke-width: 1.5;" width="15" x="206.5" y="410"/><rect fill="#FFFFFF" height="2" style="stroke: #2683B9; stroke-width: 1.5;" width="4" x="204.5" y="412"/><rect fill="#FFFFFF" height="2" style="stroke: #2683B9; stroke-width: 1.5;" width="4" x="204.5" y="416"/><text fill="#2683B9" font-family="Verdana" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="41" x="139.5" y="441.1387">create</text><line style="stroke: #2683B9; stroke-width: 1.0;" x1="120.5" x2="225.5" y1="448.9688" y2="448.9688"/><text fill="#2683B9" font-family="Verdana" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="45" x="145.5" y="469.1074">update</text><line style="stroke: #2683B9; stroke-width: 1.0;" x1="120.5" x2="225.5" y1="480.9375" y2="480.9375"/><text fill="#2683B9" font-family="Verdana" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="19" x="145.5" y="501.0762">del</text><line style="stroke: #2683B9; stroke-width: 1.0;" x1="120.5" x2="225.5" y1="512.9063" y2="512.9063"/><text fill="#2683B9" font-family="Verdana" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="24" x="145.5" y="533.0449">add</text><!--MD5=[311a50329dcd61d963fd5493378cd659]
entity search--><rect fill="#FFFFFF" filter="url(#f9x444slhxpl2)" height="43.9688" rx="4" ry="4" style="stroke: #2683B9; stroke-width: 1.5;" width="73" x="246.5" y="458"/><rect fill="#FFFFFF" height="5" style="stroke: #2683B9; stroke-width: 1.5;" width="10" x="241.5" y="463"/><rect fill="#FFFFFF" height="5" style="stroke: #2683B9; stroke-width: 1.5;" width="10" x="241.5" y="491.9688"/><text fill="#2683B9" font-family="Verdana" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="43" x="261.5" y="484.1387">search</text><!--MD5=[5f60f82aafc5aa41cf574f2c693e03d2]
entity write--><rect fill="#FFFFFF" filter="url(#f9x444slhxpl2)" height="67.9375" rx="4" ry="4" style="stroke: #2683B9; stroke-width: 1.5;" width="91" x="138.5" y="711"/><rect fill="#FFFFFF" height="5" style="stroke: #2683B9; stroke-width: 1.5;" width="10" x="133.5" y="716"/><rect fill="#FFFFFF" height="5" style="stroke: #2683B9; stroke-width: 1.5;" width="10" x="133.5" y="768.9375"/><text fill="#2683B9" font-family="Verdana" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="37" x="153.5" y="737.1387">write</text><text fill="#2683B9" font-family="Verdana" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="61" x="153.5" y="761.1074">prioritized</text><!--MD5=[dc18f1c5e76f33b9b05e9b14d28a403d]
entity read--><rect fill="#FFFFFF" filter="url(#f9x444slhxpl2)" height="43.9688" rx="4" ry="4" style="stroke: #2683B9; stroke-width: 1.5;" width="59" x="249.5" y="723"/><rect fill="#FFFFFF" height="5" style="stroke: #2683B9; stroke-width: 1.5;" width="10" x="244.5" y="728"/><rect fill="#FFFFFF" height="5" style="stroke: #2683B9; stroke-width: 1.5;" width="10" x="244.5" y="756.9688"/><text fill="#2683B9" font-family="Verdana" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="29" x="264.5" y="749.1387">read</text><!--MD5=[b5c66e61129c2ca75538fc2a971a8248]
entity FAISSØMQ--><ellipse cx="48" cy="203" fill="#FFFFFF" filter="url(#f9x444slhxpl2)" rx="8" ry="8" style="stroke: #C71C22; stroke-width: 2.0;"/><text fill="#343A40" font-family="Verdana" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="74" x="11" y="236.1387">Start Here</text><!--MD5=[5f65ec4dd6da316f9b865de109142c8c]
link FaissModule_vars to FaissModule_vols--><!--MD5=[0505a41b0d57d145d40d3a98cdecce49]
link FAISSØMQ to EntryPoint--><path d="M69.1406,203 C69.1406,203 84.5635,203 91.5635,203 C95.0635,203 98.5635,203 102.0635,203 C102.9385,203 103.8135,203 104.6886,203 C104.7432,203 104.7979,203 104.8526,203 " fill="none" id="FAISSØMQ-EntryPoint" style="stroke: #2FA4E7; stroke-width: 2.5;"/><polygon fill="#2FA4E7" points="104.8526,203,95.8526,199,99.8526,203,95.8526,207,104.8526,203" style="stroke: #2FA4E7; stroke-width: 2.5;"/><polygon fill="#FFFFFF" points="57.1406,203,63.1406,207,69.1406,203,63.1406,199,57.1406,203" style="stroke: #2FA4E7; stroke-width: 2.5;"/><!--MD5=[f1c65abcc8ddfa19f93823863c24ed61]
link FAISS_MSG_C to search--><path d="M247.1886,285.9049 C247.1886,285.9049 269.42,405.775 276.68,444.922 " fill="none" id="FAISS_MSG_C-search" style="stroke: #2FA4E7; stroke-width: 2.5; stroke-dasharray: 7.0,7.0;"/><polygon fill="#2FA4E7" points="279.075,457.837,281.3661,448.2583,278.1629,452.9209,273.5003,449.7177,279.075,457.837" style="stroke: #2FA4E7; stroke-width: 2.5;"/><line style="stroke: #2FA4E7; stroke-width: 2.5;" x1="278.1629" x2="276.7045" y1="452.9209" y2="445.055"/><polygon fill="#FFFFFF" points="245.001,274.106,242.1618,280.7347,247.1886,285.9049,250.0278,279.2763,245.001,274.106" style="stroke: #2FA4E7; stroke-width: 2.5;"/><text fill="#343A40" font-family="Verdana" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="75" x="264" y="339.1387">Thread N+1</text><!--MD5=[25d534960e96335ad27508626e48fba4]
link FAISS_MSG_C to FaissIdxMgnt--><path d="M192.4855,285.215 C192.4855,285.215 183.769,310.145 181,322 C175.811,344.217 173.158,368.665 171.938,391.518 " fill="none" id="FAISS_MSG_C-FaissIdxMgnt" style="stroke: #2FA4E7; stroke-width: 2.5; stroke-dasharray: 7.0,7.0;"/><polygon fill="#2FA4E7" points="171.377,404.76,175.7552,395.9378,171.5891,399.7645,167.7624,395.5984,171.377,404.76" style="stroke: #2FA4E7; stroke-width: 2.5;"/><line style="stroke: #2FA4E7; stroke-width: 2.5;" x1="171.5891" x2="171.927" y1="399.7645" y2="391.772"/><polygon fill="#FFFFFF" points="196.886,274.051,190.9644,278.1662,192.4855,285.215,198.4071,281.0998,196.886,274.051" style="stroke: #2FA4E7; stroke-width: 2.5;"/><text fill="#343A40" font-family="Verdana" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="57" x="187" y="339.1387">Thread N</text><!--MD5=[d582a748ed198ab6d3622eb1dfb3fa14]
link search to read--><path d="M282.4957,514.0766 C282.4957,514.0766 280.292,659.02 279.525,709.502 " fill="none" id="search-read" style="stroke: #2FA4E7; stroke-width: 2.5;"/><polygon fill="#2FA4E7" points="279.322,722.822,283.459,713.8841,279.3984,717.8226,275.4599,713.762,279.322,722.822" style="stroke: #2FA4E7; stroke-width: 2.5;"/><line style="stroke: #2FA4E7; stroke-width: 2.5;" x1="279.3984" x2="279.5195" y1="717.8226" y2="709.8235"/><polygon fill="#FFFFFF" points="282.679,502.078,278.5878,508.0162,282.4957,514.0766,286.5869,508.1384,282.679,502.078" style="stroke: #2FA4E7; stroke-width: 2.5;"/><!--MD5=[99f35d60d897f716ef0e47f55708d200]
link FaissIdxMgnt to write--><path d="M176.6091,567.3005 C176.6091,567.3005 180.564,661.845 182.055,697.502 " fill="none" id="FaissIdxMgnt-write" style="stroke: #2FA4E7; stroke-width: 2.5;"/><polygon fill="#2FA4E7" points="182.615,710.879,186.2357,701.7198,182.4062,705.8834,178.2427,702.0539,182.615,710.879" style="stroke: #2FA4E7; stroke-width: 2.5;"/><line style="stroke: #2FA4E7; stroke-width: 2.5;" x1="182.4062" x2="182.071" y1="705.8834" y2="697.89"/><polygon fill="#FFFFFF" points="176.108,555.311,172.362,561.4728,176.6091,567.3005,180.3551,561.1387,176.108,555.311" style="stroke: #2FA4E7; stroke-width: 2.5;"/><!--MD5=[55ee947a37ee6743f9e2af7c4d8aa510]
@startuml




skinparam backgroundColor White








skinparam defaultFontName       "Verdana"
skinparam defaultFontSize       12
skinparam dpi                   100
skinparam shadowing             True
skinparam roundcorner           8
skinparam ParticipantPadding    40
skinparam BoxPadding            40
skinparam Padding               5
skinparam ArrowColor            #868E96
skinparam stereotype {
    CBackgroundColor #EDF0F2
    CBorderColor #BABDBF
    ABackgroundColor #8FB961
    ABorderColor $SUCCESS_DARK
    IBackgroundColor #D2494E
    IBorderColor $DANGER_DARK
    EBackgroundColor #E47833
    EBorderColor $WARNING_DARK
    NBackgroundColor #35638F
    NBorderColor $INFO_DARK
}
skinparam title {
	FontColor	                 #2FA4E7
	BorderColor	                 #BABDBF
	FontSize	    	         20
	BorderRoundCorner            8
	BorderThickness 	         1
	BackgroundColor              White
}

skinparam legend {
	BackgroundColor White
	BorderColor #BABDBF
	FontColor #343A40
}


skinparam activity {
		FontColor #2683B9
	BorderColor #2683B9
	BackgroundColor White
	BarColor #73A839
	StartColor #033C73
	EndColor #033C73
	DiamondBackgroundColor White
  	DiamondBorderColor #BABDBF
	DiamondFontColor #BABDBF
}


skinparam participant {
		FontColor #2683B9
	BorderColor #2683B9
	BackgroundColor White
	ParticipantBorderThickness 2
}


skinparam actor {
		FontColor #2683B9
	BorderColor #2683B9
	BackgroundColor White
}


skinparam arrow {
	Thickness 2.5
	Color #2FA4E7
	FontColor #343A40
}


skinparam sequence {
	BorderColor #2FA4E7
	TitleFontColor #2FA4E7
	BackgroundColor White
	StartColor #2FA4E7
	EndColor #2FA4E7
	BoxBackgroundColor White
	BoxBorderColor #868E96
	BoxFontColor #343A40
	LifeLineBorderColor #BABDBF
	LifeLineBorderThickness 2
	LifeLineBackgroundColor White
	GroupBorderColor #868E96
	GroupFontColor #343A40
	GroupHeaderFontColor #033C73
	DividerBackgroundColor White
    DividerBorderColor #868E96
    DividerBorderThickness 2
    DividerFontColor #343A40
	ReferenceBackgroundColor White
	ReferenceBorderColor #868E96
	ReferenceFontColor #343A40
	ReferenceHeaderFontColor #033C73
}


skinparam partition {
	BorderColor #2FA4E7
	FontColor #2FA4E7
	BackgroundColor White
}


skinparam collections {
		FontColor #2683B9
	BorderColor #2683B9
	BackgroundColor White
}


skinparam control {
		FontColor #2683B9
	BorderColor #2683B9
	BackgroundColor White
}


skinparam entity {
		FontColor #2683B9
	BorderColor #2683B9
	BackgroundColor White
}


skinparam boundary {
		FontColor #2683B9
	BorderColor #2683B9
	BackgroundColor White
}


skinparam agent {
	BackgroundColor White
	BorderColor #999999
	FontColor #333333
}


skinparam note {
	BorderThickness 1
	BackgroundColor White
	BorderColor #033C73
	FontColor #033C73
}


skinparam artifact {
	BackgroundColor White
	BorderColor #868E96
	FontColor #868E96
}


skinparam component {
		FontColor #2683B9
	BorderColor #2683B9
	BackgroundColor White
	
}


skinparam interface {
	BackgroundColor  White
	BorderColor  #C71C22
	FontColor #343A40
}


skinparam storage {
	BackgroundColor White
  	BorderColor #DD5600
	FontColor #DD5600
}


skinparam node {
	BackgroundColor White
	BorderColor #343A40
	FontColor #343A40
}


skinparam cloud {
	BackgroundColor #F2FCFE-#eeeeee
	BorderColor #F2FCFE
	FontColor #343A40
}


skinparam database {
		FontColor #2683B9
	BorderColor #2683B9
	BackgroundColor White
}


skinparam class {
		FontColor #2683B9
	BorderColor #2683B9
	BackgroundColor White
	HeaderBackgroundColor #2FA4E7-#2683B9
	StereotypeFontColor #343A40
	BorderThickness 1
	AttributeFontColor #343A40
	AttributeFontSize 11
}


skinparam object {
		FontColor #2683B9
	BorderColor #2683B9
	BackgroundColor White
	StereotypeFontColor #343A40
	BorderThickness 1
	AttributeFontColor #BABDBF
	AttributeFontSize 11
}


skinparam usecase {
		FontColor #2683B9
	BorderColor #2683B9
	BackgroundColor White
	BorderThickness 2
	StereotypeFontColor #2FA4E7
}


skinparam rectangle {
		FontColor #2683B9
	BorderColor #2683B9
	BackgroundColor White
	BorderThickness 2
	StereotypeFontColor #2FA4E7
}


skinparam package {
	BackgroundColor #F2FCFE-#eeeeee
  	BorderColor #033C73
	FontColor #033C73
	BorderThickness 2
}


skinparam folder {
	BackgroundColor White
  	BorderColor #DD5600
	FontColor #DD5600
	BorderThickness 2
}


skinparam frame {
		FontColor #2683B9
	BorderColor #2683B9
	BackgroundColor White
	BorderThickness 2
	StereotypeFontColor #2FA4E7
}



skinparam state {
		FontColor #2683B9
	BorderColor #2683B9
	BackgroundColor White
	StartColor #033C73
	EndColor #033C73
	AttributeFontColor #BABDBF
	AttributeFontSize 11
}


skinparam queue {
		FontColor #2683B9
	BorderColor #2683B9
	BackgroundColor White
}


skinparam card {
	BackgroundColor White
	BorderColor #033C73
	FontColor #033C73
}


skinparam file {
	BackgroundColor White
	BorderColor #868E96
	FontColor #868E96
}


skinparam stack {
		FontColor #2683B9
	BorderColor #2683B9
	BackgroundColor White
}



hide stereotype

!pragma horizontalLineBetweenDifferentPackageAllowed

skinparam file<<NOTE>> {
	BorderThickness 0.5
    BackgroundColor LightYellow
	BorderColor LightSteelBlue
	FontColor SteelBlue
    FontSize 10
    ArrowColor LightSteelBlue
}
skinparam arrow<<NOTE>> {
    Color LightSteelBlue
}





skinparam node<<MULTITHREADED>>{
    FontColor #E47833
	BorderColor #E47833
	BackgroundColor White
	BorderThickness 2
	StereotypeFontColor #2FA4E7
}


skinparam package<<CONTAINER>>{
    	BackgroundColor #eeeeee
  	BorderColor #033C73
	FontColor #033C73
	BorderThickness 2
}
skinparam frame<<CONTAINER>>{
    	BackgroundColor #eeeeee
  	BorderColor #033C73
	FontColor #033C73
	BorderThickness 2
}


skinparam rectangle<<boundary>> {
    BackgroundColor #eeeeee
    Shadowing false
    StereotypeFontSize 0
    FontColor #444444
    BorderColor #444444
    BorderStyle dashed
    BoxPadding 0
}

skinparam file<<docker_params>> {
    Shadowing True
    FontSize 10
}












skinparam nodesep 20
skinparam ranksep 10

scale 1





interface "<b>Start Here</b>" as FAISSØMQ
    package FaissModule as FaissModule <<CONTAINER>> {
            rectangle "Docker Config" <<boundary>> as FaissModule_cfg {
                    

        file "- - =Variables - -\n==Mandatory\n\n===Optional\nNB_MATCHING= <i>10</i>\n                                LOG_LEVEL= <i>INFO</i>" <<docker_params>> as FaissModule_vars
                    

        file "- - =Volumes - -\n<b>logs</b> -> /var/log/supervisor\n                            <b>data_dir</b> -> /opt/faiss" <<docker_params>> as FaissModule_vols
    
                FaissModule_vols -[hidden]U- FaissModule_vars
        } 
    
        frame "Entry point" as EntryPoint {
            component FAISS_MSG_C [
                [[http://10.165.64.205/AI/Messaging Messaging]] lib
                - - - -
                <i><color:teal>ListenNumpyMsg()</color></i>
                <i><color:teal>on <b>127.0.0.1:14000</b></color></i>
                - - - -
                ThreadPool
                ]
        }
            FAISSØMQ o-r-> EntryPoint
    
        frame "Manage Index" as MgntIndex {
            component FaissIdxMgnt [
                create
                - - -
                update
                - - -
                del
                - - -
                add]
                [search]
        }

        FAISS_MSG_C o..> [search]: Thread N+1
        FAISS_MSG_C o..> FaissIdxMgnt: Thread N

        database "Faiss Index" as FaissIndex {
            frame "RWLock¹" as FaissRWLock {
                component "<b>write</b>\n<i>prioritized</i>" as write
                [read]
            }
        }
            [search] o- -> [read]
            FaissIdxMgnt o- -> [write]


}
@enduml

PlantUML version 1.2020.08(Sun Apr 26 14:08:22 UTC 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_212-8u212-b01-1~deb9u1-b01
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>