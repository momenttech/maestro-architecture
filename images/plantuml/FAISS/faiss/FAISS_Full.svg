<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="903px" preserveAspectRatio="none" style="width:653px;height:903px;background:#00000000;" version="1.1" viewBox="0 0 653 903" width="653px" zoomAndPan="magnify"><defs><filter height="300%" id="fwvt0zeiegndc" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[4abae3d9ce14c4c159453d7c82de858e]
cluster FaissModule--><path d="M77,24 L174,24 A6,6 0 0 1 178,28 L185,53.9688 L637,53.9688 A4,4 0 0 1 641,57.9688 L641,887 A4,4 0 0 1 637,891 L77,891 A4,4 0 0 1 73,887 L73,28 A4,4 0 0 1 77,24 " fill="#EEEEEE" filter="url(#fwvt0zeiegndc)" style="stroke: #033C73; stroke-width: 1.5;"/><line style="stroke: #033C73; stroke-width: 1.5;" x1="73" x2="185" y1="53.9688" y2="53.9688"/><text fill="#033C73" font-family="Verdana" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="89" x="82" y="42.1387">FaissModule</text><!--MD5=[6b4b3b1bbdd8387328ca5689c9e21d3b]
cluster FaissModule_cfg--><rect fill="#EEEEEE" height="487" rx="4" ry="4" style="stroke: #444444; stroke-width: 2.0; stroke-dasharray: 7.0,7.0;" width="204" x="413" y="104"/><text fill="#444444" font-family="Verdana" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="98" x="466" y="122.1387">Docker Config</text><!--MD5=[475d745c38d6d4a8cd520ef0ab5e7cb0]
cluster EntryPoint--><rect fill="#FFFFFF" filter="url(#fwvt0zeiegndc)" height="264" rx="4" ry="4" style="stroke: #2683B9; stroke-width: 1.5;" width="276" x="105" y="82"/><path d="M203,83 L203,98.9688 L193,108.9688 L105,108.9688 " fill="none" style="stroke: #2683B9; stroke-width: 1.5;"/><text fill="#2683B9" font-family="Verdana" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="78" x="113" y="99.1387">Entry point</text><!--MD5=[2241ecf61a6d255cec2496da3ddde373]
cluster MgntIndex--><rect fill="#FFFFFF" filter="url(#fwvt0zeiegndc)" height="208" rx="4" ry="4" style="stroke: #2683B9; stroke-width: 1.5;" width="232" x="122" y="411"/><path d="M241,412 L241,427.9688 L231,437.9688 L122,437.9688 " fill="none" style="stroke: #2683B9; stroke-width: 1.5;"/><text fill="#2683B9" font-family="Verdana" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="99" x="130" y="428.1387">Manage Index</text><!--MD5=[b04bb5550214f78caaca30902c6af4f0]
cluster FaissIndex--><path d="M109,662 C109,652 234.5,652 234.5,652 C234.5,652 360,652 360,662 L360,857 C360,867 234.5,867 234.5,867 C234.5,867 109,867 109,857 L109,662 " fill="#FFFFFF" filter="url(#fwvt0zeiegndc)" style="stroke: #2683B9; stroke-width: 1.5;"/><path d="M109,662 C109,672 234.5,672 234.5,672 C234.5,672 360,672 360,662 " fill="none" style="stroke: #2683B9; stroke-width: 1.5;"/><text fill="#2683B9" font-family="Verdana" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="79" x="195" y="690.1387">Faiss Index</text><!--MD5=[274cdae4132820e6323b44a261851cbe]
cluster FaissRWLock--><rect fill="#FFFFFF" filter="url(#fwvt0zeiegndc)" height="126" rx="4" ry="4" style="stroke: #2683B9; stroke-width: 1.5;" width="203" x="133" y="717"/><path d="M213,718 L213,733.9688 L203,743.9688 L133,743.9688 " fill="none" style="stroke: #2683B9; stroke-width: 1.5;"/><text fill="#2683B9" font-family="Verdana" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="60" x="141" y="734.1387">RWLock¹</text><!--MD5=[6ba3af77585f0f96afa8ecbab1226636]
entity FaissModule_vars--><path d="M444.5,150 L444.5,303.9922 A4,4 0 0 0 448.5,307.9922 L581.5,307.9922 A4,4 0 0 0 585.5,303.9922 L585.5,156 L575.5,146 L448.5,146 A4,4 0 0 0 444.5,150 " fill="#FFFFFF" filter="url(#fwvt0zeiegndc)" style="stroke: #868E96; stroke-width: 1.5;"/><path d="M575.5,146 L575.5,152 A4,4 0 0 0 579.5,156 L585.5,156 " fill="#FFFFFF" style="stroke: #868E96; stroke-width: 1.5;"/><text fill="#868E96" font-family="Verdana" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="77" x="465.5" y="198.4355">Mandatory</text><text fill="#868E96" font-family="Verdana" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="0" x="468.5" y="220.5479"/><text fill="#868E96" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="55" x="465.5" y="243.1167">Optional</text><text fill="#868E96" font-family="Verdana" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="84" x="465.5" y="264.9932">NB_MATCHING=</text><text fill="#868E96" font-family="Verdana" font-size="10" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="12" x="552.5" y="264.9932">10</text><text fill="#868E96" font-family="Verdana" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="68" x="465.5" y="286.6338">LOG_LEVEL=</text><text fill="#868E96" font-family="Verdana" font-size="10" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="25" x="536.5" y="286.6338">INFO</text><line style="stroke: #868E96; stroke-width: 1.0;" x1="445.5" x2="473.5" y1="169.1484" y2="169.1484"/><text fill="#868E96" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="73" x="478.5" y="173.4951">Variables</text><line style="stroke: #868E96; stroke-width: 1.0;" x1="556.5" x2="584.5" y1="169.1484" y2="169.1484"/><!--MD5=[ebd114480cba0ff1de10da84bec6bb98]
entity FaissModule_vols--><path d="M429,485 L429,570.5781 A4,4 0 0 0 433,574.5781 L597,574.5781 A4,4 0 0 0 601,570.5781 L601,491 L591,481 L433,481 A4,4 0 0 0 429,485 " fill="#FFFFFF" filter="url(#fwvt0zeiegndc)" style="stroke: #868E96; stroke-width: 1.5;"/><path d="M591,481 L591,487 A4,4 0 0 0 595,491 L601,491 " fill="#FFFFFF" style="stroke: #868E96; stroke-width: 1.5;"/><text fill="#868E96" font-family="Verdana" font-size="10" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="23" x="450" y="531.5791">logs</text><text fill="#868E96" font-family="Verdana" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="104" x="476" y="531.5791">-&gt; /var/log/supervisor</text><text fill="#868E96" font-family="Verdana" font-size="10" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="450" y="553.2197">data_dir</text><text fill="#868E96" font-family="Verdana" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="59" x="499" y="553.2197">-&gt; /opt/faiss</text><line style="stroke: #868E96; stroke-width: 1.0;" x1="430" x2="476" y1="504.1484" y2="504.1484"/><text fill="#868E96" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="68" x="481" y="508.4951">Volumes</text><line style="stroke: #868E96; stroke-width: 1.0;" x1="554" x2="600" y1="504.1484" y2="504.1484"/><!--MD5=[689e0eb4ceaea5e576289e84e3d749c9]
entity FAISS_MSG_C--><rect fill="#FFFFFF" filter="url(#fwvt0zeiegndc)" height="189.8125" rx="4" ry="4" style="stroke: #2683B9; stroke-width: 1.5;" width="220" x="137" y="132"/><rect fill="#FFFFFF" height="10" style="stroke: #2683B9; stroke-width: 1.5;" width="15" x="337" y="137"/><rect fill="#FFFFFF" height="2" style="stroke: #2683B9; stroke-width: 1.5;" width="4" x="335" y="139"/><rect fill="#FFFFFF" height="2" style="stroke: #2683B9; stroke-width: 1.5;" width="4" x="335" y="143"/><a href="http://10.165.64.205/AI/Messaging" target="_top" title="http://10.165.64.205/AI/Messaging" xlink:actuate="onRequest" xlink:href="http://10.165.64.205/AI/Messaging" xlink:show="new" xlink:title="http://10.165.64.205/AI/Messaging" xlink:type="simple"><text fill="#0000FF" font-family="Verdana" font-size="12" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="67" x="157" y="168.1387">Messaging</text></a><text fill="#2683B9" font-family="Verdana" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="14" x="228" y="168.1387">lib</text><line style="stroke: #2683B9; stroke-width: 1.0;" x1="138" x2="356" y1="175.9688" y2="175.9688"/><text fill="#008080" font-family="Verdana" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="158" x="163" y="196.1074">zeromq.ThreadedWorker(</text><text fill="#008080" font-family="Verdana" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="0" x="179" y="220.0762"/><text fill="#008080" font-family="Verdana" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="84" x="179" y="220.0762">callback_func</text><text fill="#008080" font-family="Verdana" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="4" x="263" y="220.0762">,</text><text fill="#008080" font-family="Verdana" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="64" x="179" y="244.0449">127.0.0.1,</text><text fill="#008080" font-family="Verdana" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="0" x="179" y="268.0137"/><text fill="#008080" font-family="Verdana" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="40" x="179" y="268.0137">14000</text><text fill="#008080" font-family="Verdana" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="5" x="219" y="268.0137">)</text><line style="stroke: #2683B9; stroke-width: 1.0;" x1="138" x2="356" y1="279.8438" y2="279.8438"/><text fill="#2683B9" font-family="Verdana" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="71" x="163" y="299.9824">ThreadPool</text><!--MD5=[39279e4bc89810b5e3f47f5b3c9a63d1]
entity FaissIdxMgnt--><rect fill="#FFFFFF" filter="url(#fwvt0zeiegndc)" height="149.875" rx="4" ry="4" style="stroke: #2683B9; stroke-width: 1.5;" width="107" x="137.5" y="453"/><rect fill="#FFFFFF" height="10" style="stroke: #2683B9; stroke-width: 1.5;" width="15" x="224.5" y="458"/><rect fill="#FFFFFF" height="2" style="stroke: #2683B9; stroke-width: 1.5;" width="4" x="222.5" y="460"/><rect fill="#FFFFFF" height="2" style="stroke: #2683B9; stroke-width: 1.5;" width="4" x="222.5" y="464"/><text fill="#2683B9" font-family="Verdana" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="41" x="157.5" y="489.1387">create</text><line style="stroke: #2683B9; stroke-width: 1.0;" x1="138.5" x2="243.5" y1="496.9688" y2="496.9688"/><text fill="#2683B9" font-family="Verdana" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="45" x="163.5" y="517.1074">update</text><line style="stroke: #2683B9; stroke-width: 1.0;" x1="138.5" x2="243.5" y1="528.9375" y2="528.9375"/><text fill="#2683B9" font-family="Verdana" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="19" x="163.5" y="549.0762">del</text><line style="stroke: #2683B9; stroke-width: 1.0;" x1="138.5" x2="243.5" y1="560.9063" y2="560.9063"/><text fill="#2683B9" font-family="Verdana" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="24" x="163.5" y="581.0449">add</text><!--MD5=[311a50329dcd61d963fd5493378cd659]
entity search--><rect fill="#FFFFFF" filter="url(#fwvt0zeiegndc)" height="43.9688" rx="4" ry="4" style="stroke: #2683B9; stroke-width: 1.5;" width="73" x="264.5" y="506"/><rect fill="#FFFFFF" height="5" style="stroke: #2683B9; stroke-width: 1.5;" width="10" x="259.5" y="511"/><rect fill="#FFFFFF" height="5" style="stroke: #2683B9; stroke-width: 1.5;" width="10" x="259.5" y="539.9688"/><text fill="#2683B9" font-family="Verdana" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="43" x="279.5" y="532.1387">search</text><!--MD5=[5f60f82aafc5aa41cf574f2c693e03d2]
entity write--><rect fill="#FFFFFF" filter="url(#fwvt0zeiegndc)" height="67.9375" rx="4" ry="4" style="stroke: #2683B9; stroke-width: 1.5;" width="91" x="149.5" y="759"/><rect fill="#FFFFFF" height="5" style="stroke: #2683B9; stroke-width: 1.5;" width="10" x="144.5" y="764"/><rect fill="#FFFFFF" height="5" style="stroke: #2683B9; stroke-width: 1.5;" width="10" x="144.5" y="816.9375"/><text fill="#2683B9" font-family="Verdana" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="37" x="164.5" y="785.1387">write</text><text fill="#2683B9" font-family="Verdana" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="61" x="164.5" y="809.1074">prioritized</text><!--MD5=[dc18f1c5e76f33b9b05e9b14d28a403d]
entity read--><rect fill="#FFFFFF" filter="url(#fwvt0zeiegndc)" height="43.9688" rx="4" ry="4" style="stroke: #2683B9; stroke-width: 1.5;" width="59" x="260.5" y="771"/><rect fill="#FFFFFF" height="5" style="stroke: #2683B9; stroke-width: 1.5;" width="10" x="255.5" y="776"/><rect fill="#FFFFFF" height="5" style="stroke: #2683B9; stroke-width: 1.5;" width="10" x="255.5" y="804.9688"/><text fill="#2683B9" font-family="Verdana" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="29" x="275.5" y="797.1387">read</text><!--MD5=[b5c66e61129c2ca75538fc2a971a8248]
entity FAISSØMQ--><ellipse cx="48" cy="227" fill="#FFFFFF" filter="url(#fwvt0zeiegndc)" rx="8" ry="8" style="stroke: #C71C22; stroke-width: 2.0;"/><text fill="#343A40" font-family="Verdana" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="74" x="11" y="260.1387">Start Here</text><!--MD5=[5f65ec4dd6da316f9b865de109142c8c]
link FaissModule_vars to FaissModule_vols--><!--MD5=[0505a41b0d57d145d40d3a98cdecce49]
link FAISSØMQ to EntryPoint--><path d="M69.1406,227 C69.1406,227 84.5635,227 91.5635,227 C95.0635,227 98.5635,227 102.0635,227 C102.9385,227 103.8135,227 104.6886,227 C104.7432,227 104.7979,227 104.8526,227 " fill="none" id="FAISSØMQ-EntryPoint" style="stroke: #2FA4E7; stroke-width: 2.5;"/><polygon fill="#2FA4E7" points="104.8526,227,95.8526,223,99.8526,227,95.8526,231,104.8526,227" style="stroke: #2FA4E7; stroke-width: 2.5;"/><polygon fill="#00000000" points="57.1406,227,63.1406,231,69.1406,227,63.1406,223,57.1406,227" style="stroke: #2FA4E7; stroke-width: 2.5;"/><!--MD5=[f1c65abcc8ddfa19f93823863c24ed61]
link FAISS_MSG_C to search--><path d="M266.1456,334.0038 C266.1456,334.0038 287.959,454.79 294.86,493.003 " fill="none" id="FAISS_MSG_C-search" style="stroke: #2FA4E7; stroke-width: 2.5; stroke-dasharray: 7.0,7.0;"/><polygon fill="#2FA4E7" points="297.181,505.853,299.5181,496.2854,296.2925,500.9326,291.6454,497.707,297.181,505.853" style="stroke: #2FA4E7; stroke-width: 2.5;"/><line style="stroke: #2FA4E7; stroke-width: 2.5;" x1="296.2925" x2="294.8705" y1="500.9326" y2="493.0605"/><polygon fill="#00000000" points="264.012,322.195,261.1425,328.8106,266.1456,334.0038,269.0151,327.3882,264.012,322.195" style="stroke: #2FA4E7; stroke-width: 2.5;"/><text fill="#343A40" font-family="Verdana" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="75" x="282" y="387.1387">Thread N+1</text><!--MD5=[25d534960e96335ad27508626e48fba4]
link FAISS_MSG_C to FaissIdxMgnt--><path d="M208.6747,333.7107 C208.6747,333.7107 202.197,358.479 200,370 C195.746,392.306 193.306,416.691 191.951,439.449 " fill="none" id="FAISS_MSG_C-FaissIdxMgnt" style="stroke: #2FA4E7; stroke-width: 2.5; stroke-dasharray: 7.0,7.0;"/><polygon fill="#2FA4E7" points="191.272,452.633,195.7296,443.8506,191.5291,447.6396,187.7401,443.4392,191.272,452.633" style="stroke: #2FA4E7; stroke-width: 2.5;"/><line style="stroke: #2FA4E7; stroke-width: 2.5;" x1="191.5291" x2="191.94" y1="447.6396" y2="439.65"/><polygon fill="#00000000" points="212.015,322.185,206.5029,326.8344,208.6747,333.7107,214.1867,329.0613,212.015,322.185" style="stroke: #2FA4E7; stroke-width: 2.5;"/><text fill="#343A40" font-family="Verdana" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="57" x="206" y="387.1387">Thread N</text><!--MD5=[d582a748ed198ab6d3622eb1dfb3fa14]
link search to read--><path d="M299.6156,562.0675 C299.6156,562.0675 293.538,707.42 291.429,757.826 " fill="none" id="search-read" style="stroke: #2FA4E7; stroke-width: 2.5;"/><polygon fill="#2FA4E7" points="290.886,770.822,295.2583,761.9969,291.0948,765.8264,287.2653,761.6628,290.886,770.822" style="stroke: #2FA4E7; stroke-width: 2.5;"/><line style="stroke: #2FA4E7; stroke-width: 2.5;" x1="291.0948" x2="291.429" y1="765.8264" y2="757.833"/><polygon fill="#00000000" points="300.118,550.078,295.8703,555.9053,299.6156,562.0675,303.8633,556.2402,300.118,550.078" style="stroke: #2FA4E7; stroke-width: 2.5;"/><!--MD5=[99f35d60d897f716ef0e47f55708d200]
link FaissIdxMgnt to write--><path d="M192.312,615.3096 C192.312,615.3096 193.751,709.845 194.293,745.502 " fill="none" id="FaissIdxMgnt-write" style="stroke: #2FA4E7; stroke-width: 2.5;"/><polygon fill="#2FA4E7" points="194.496,758.879,198.3591,749.8194,194.4202,753.8796,190.36,749.9407,194.496,758.879" style="stroke: #2FA4E7; stroke-width: 2.5;"/><line style="stroke: #2FA4E7; stroke-width: 2.5;" x1="194.4202" x2="194.2985" y1="753.8796" y2="745.88"/><polygon fill="#00000000" points="192.13,603.311,188.2215,609.371,192.312,615.3096,196.2205,609.2496,192.13,603.311" style="stroke: #2FA4E7; stroke-width: 2.5;"/><!--MD5=[61b08a98dca4e9a31d77ca63a20ec367]
@startuml FAISS_Full




skinparam backgroundColor White








skinparam defaultFontName       "Verdana"
skinparam defaultFontSize       12
skinparam dpi                   100
skinparam shadowing             True
skinparam roundcorner           8
skinparam ParticipantPadding    40
skinparam BoxPadding            40
skinparam Padding               5
skinparam ArrowColor            #868E96
skinparam stereotype {
    CBackgroundColor #EDF0F2
    CBorderColor #BABDBF
    ABackgroundColor #8FB961
    ABorderColor $SUCCESS_DARK
    IBackgroundColor #D2494E
    IBorderColor $DANGER_DARK
    EBackgroundColor #E47833
    EBorderColor $WARNING_DARK
    NBackgroundColor #35638F
    NBorderColor $INFO_DARK
}
skinparam title {
	FontColor	                 #2FA4E7
	BorderColor	                 #BABDBF
	FontSize	    	         20
	BorderRoundCorner            8
	BorderThickness 	         1
	BackgroundColor              White
}

skinparam legend {
	BackgroundColor White
	BorderColor #BABDBF
	FontColor #343A40
}


skinparam activity {
		FontColor #2683B9
	BorderColor #2683B9
	BackgroundColor White
	BarColor #73A839
	StartColor #033C73
	EndColor #033C73
	DiamondBackgroundColor White
  	DiamondBorderColor #BABDBF
	DiamondFontColor #BABDBF
}


skinparam participant {
		FontColor #2683B9
	BorderColor #2683B9
	BackgroundColor White
	ParticipantBorderThickness 2
}


skinparam actor {
		FontColor #2683B9
	BorderColor #2683B9
	BackgroundColor White
}


skinparam arrow {
	Thickness 2.5
	Color #2FA4E7
	FontColor #343A40
}


skinparam sequence {
	BorderColor #2FA4E7
	TitleFontColor #2FA4E7
	BackgroundColor White
	StartColor #2FA4E7
	EndColor #2FA4E7
	BoxBackgroundColor White
	BoxBorderColor #868E96
	BoxFontColor #343A40
	LifeLineBorderColor #BABDBF
	LifeLineBorderThickness 2
	LifeLineBackgroundColor White
	GroupBorderColor #868E96
	GroupFontColor #343A40
	GroupHeaderFontColor #033C73
	DividerBackgroundColor White
    DividerBorderColor #868E96
    DividerBorderThickness 2
    DividerFontColor #343A40
	ReferenceBackgroundColor White
	ReferenceBorderColor #868E96
	ReferenceFontColor #343A40
	ReferenceHeaderFontColor #033C73
}


skinparam partition {
	BorderColor #2FA4E7
	FontColor #2FA4E7
	BackgroundColor White
}


skinparam collections {
		FontColor #2683B9
	BorderColor #2683B9
	BackgroundColor White
}


skinparam control {
		FontColor #2683B9
	BorderColor #2683B9
	BackgroundColor White
}


skinparam entity {
		FontColor #2683B9
	BorderColor #2683B9
	BackgroundColor White
}


skinparam boundary {
		FontColor #2683B9
	BorderColor #2683B9
	BackgroundColor White
}


skinparam agent {
	BackgroundColor White
	BorderColor #999999
	FontColor #333333
}


skinparam note {
	BorderThickness 1
	BackgroundColor White
	BorderColor #033C73
	FontColor #033C73
}


skinparam artifact {
	BackgroundColor White
	BorderColor #868E96
	FontColor #868E96
}


skinparam component {
		FontColor #2683B9
	BorderColor #2683B9
	BackgroundColor White
	
}


skinparam interface {
	BackgroundColor  White
	BorderColor  #C71C22
	FontColor #343A40
}


skinparam storage {
	BackgroundColor White
  	BorderColor #DD5600
	FontColor #DD5600
}


skinparam node {
	BackgroundColor White
	BorderColor #343A40
	FontColor #343A40
}


skinparam cloud {
	BackgroundColor #F2FCFE-#eeeeee
	BorderColor #F2FCFE
	FontColor #343A40
}


skinparam database {
		FontColor #2683B9
	BorderColor #2683B9
	BackgroundColor White
}


skinparam class {
		FontColor #2683B9
	BorderColor #2683B9
	BackgroundColor White
	HeaderBackgroundColor #2FA4E7-#2683B9
	StereotypeFontColor #343A40
	BorderThickness 1
	AttributeFontColor #343A40
	AttributeFontSize 11
}


skinparam object {
		FontColor #2683B9
	BorderColor #2683B9
	BackgroundColor White
	StereotypeFontColor #343A40
	BorderThickness 1
	AttributeFontColor #BABDBF
	AttributeFontSize 11
}


skinparam usecase {
		FontColor #2683B9
	BorderColor #2683B9
	BackgroundColor White
	BorderThickness 2
	StereotypeFontColor #2FA4E7
}


skinparam rectangle {
		FontColor #2683B9
	BorderColor #2683B9
	BackgroundColor White
	BorderThickness 2
	StereotypeFontColor #2FA4E7
}


skinparam package {
	BackgroundColor #F2FCFE-#eeeeee
  	BorderColor #033C73
	FontColor #033C73
	BorderThickness 2
}


skinparam folder {
	BackgroundColor White
  	BorderColor #DD5600
	FontColor #DD5600
	BorderThickness 2
}


skinparam frame {
		FontColor #2683B9
	BorderColor #2683B9
	BackgroundColor White
	BorderThickness 2
	StereotypeFontColor #2FA4E7
}



skinparam state {
		FontColor #2683B9
	BorderColor #2683B9
	BackgroundColor White
	StartColor #033C73
	EndColor #033C73
	AttributeFontColor #BABDBF
	AttributeFontSize 11
}


skinparam queue {
		FontColor #2683B9
	BorderColor #2683B9
	BackgroundColor White
}


skinparam card {
	BackgroundColor White
	BorderColor #033C73
	FontColor #033C73
}


skinparam file {
	BackgroundColor White
	BorderColor #868E96
	FontColor #868E96
}


skinparam stack {
		FontColor #2683B9
	BorderColor #2683B9
	BackgroundColor White
}



hide stereotype

skinparam backgroundColor transparent
!pragma horizontalLineBetweenDifferentPackageAllowed

skinparam file<<NOTE>> {
	BorderThickness 0.5
    BackgroundColor LightYellow
	BorderColor LightSteelBlue
	FontColor SteelBlue
    FontSize 10
    ArrowColor LightSteelBlue
}
skinparam arrow<<NOTE>> {
    Color LightSteelBlue
}





skinparam node<<MULTITHREADED>>{
    FontColor #E47833
	BorderColor #E47833
	BackgroundColor White
	BorderThickness 2
	StereotypeFontColor #2FA4E7
}


skinparam package<<CONTAINER>>{
    	BackgroundColor #eeeeee
  	BorderColor #033C73
	FontColor #033C73
	BorderThickness 2
}
skinparam frame<<CONTAINER>>{
    	BackgroundColor #eeeeee
  	BorderColor #033C73
	FontColor #033C73
	BorderThickness 2
}


skinparam rectangle<<boundary>> {
    BackgroundColor #eeeeee
    Shadowing false
    StereotypeFontSize 0
    FontColor #444444
    BorderColor #444444
    BorderStyle dashed
    BoxPadding 0
}

skinparam file<<docker_params>> {
    Shadowing True
    FontSize 10
}












skinparam nodesep 20
skinparam ranksep 10

scale 1





interface "<b>Start Here</b>" as FAISSØMQ
    package FaissModule as FaissModule <<CONTAINER>> {
            rectangle "Docker Config" <<boundary>> as FaissModule_cfg {
                    

        file "- - =Variables - -\n==Mandatory\n\n===Optional\nNB_MATCHING= <i>10</i>\n                                LOG_LEVEL= <i>INFO</i>" <<docker_params>> as FaissModule_vars
                    

        file "- - =Volumes - -\n<b>logs</b> -> /var/log/supervisor\n                            <b>data_dir</b> -> /opt/faiss" <<docker_params>> as FaissModule_vols
    
                FaissModule_vols -[hidden]U- FaissModule_vars
        } 
    
        frame "Entry point" as EntryPoint {
            component FAISS_MSG_C [
                [[http://10.165.64.205/AI/Messaging Messaging]] lib
                - - - -
                <color:teal>zeromq.ThreadedWorker(</color>
                <color:teal>    <i>callback_func</i>,</color>
                <color:teal>    127.0.0.1,</color>
                <color:teal>    <b>14000</b>)</color>
                - - - -
                ThreadPool
                ]
        }
            FAISSØMQ o-r-> EntryPoint
    
        frame "Manage Index" as MgntIndex {
            component FaissIdxMgnt [
                create
                - - -
                update
                - - -
                del
                - - -
                add]
                [search]
        }

        FAISS_MSG_C o..> [search]: Thread N+1
        FAISS_MSG_C o..> FaissIdxMgnt: Thread N

        database "Faiss Index" as FaissIndex {
            frame "RWLock¹" as FaissRWLock {
                component "<b>write</b>\n<i>prioritized</i>" as write
                [read]
            }
        }
            [search] o- -> [read]
            FaissIdxMgnt o- -> [write]


}
@enduml

PlantUML version 1.2020.08(Sun Apr 26 14:08:22 UTC 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_212-8u212-b01-1~deb9u1-b01
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>